<Setup><Base><Version>20</Version><NAME>Ls_Shadowplate348</NAME><Note>Shadowplate - experiment in removing direct sun from an image to make a completely shady plate for comping in new shadows, based on https://www.youtube.com/watch?v=Yb3Cn3JnkUI (the part from 5:25)

Super rapid demo: https://www.youtube.com/watch?v=LfNX3SdyqkQ

It converts to a perceptual colourspace to seperate brightness from colour, then pulls a key for the highlights and gains them down, repeating the process many times.  Then the colour channels are replaced from the original and optionally blurred

The matte output can help to set the key protect controls, and to grade further downstream

lewis@lewissaunders.com</Note><Expanded>False</Expanded><ScrollBar>0</ScrollBar><Frames>0</Frames><Current_Time>1001</Current_Time><AnimRefFrame>1001</AnimRefFrame><Input_DataType>4</Input_DataType><ClampMode>0</ClampMode><AdapDegrad>False</AdapDegrad><ReadOnly>False</ReadOnly><Range Enable="False" Before="2" After="2" Start="1001" End="1100" SpanEnable="False" Span="100"/><NoMediaHandling>1</NoMediaHandling><UsedAsTransition>False</UsedAsTransition><FrameBounds W="1920" H="1080" X="0" Y="0" SX="16" SY="9"/></Base><State><NbPasses>4</NbPasses><Regen>True</Regen><OutputResMode>1</OutputResMode><OutputResolution><Width>1920</Width><Height>1080</Height><Format>143</Format><ScanFormat>2</ScanFormat><AspectRatio>1.777777777777778</AspectRatio><ColourSpace>ACEScg</ColourSpace></OutputResolution><TopChannel><Channel Name="Ls_Shadowplate348"><Uncollapsed/></Channel></TopChannel><EffectChannel><Channel Name="Effect"><Uncollapsed/></Channel></EffectChannel><ShaderParameters><Parameter><value>11</value></Parameter><Parameter><value>4</value></Parameter><Parameter><Data><Channel Name="keymin"><Uncollapsed/></Channel></Data></Parameter><Parameter><Data><Channel Name="keymax"><Uncollapsed/></Channel></Data></Parameter><Parameter><Data><Channel Name="keysmooth"><Uncollapsed/></Channel></Data></Parameter><Parameter><Data><Channel Name="repeats"><Uncollapsed/></Channel></Data></Parameter><Parameter><Data><Channel Name="gain"><Uncollapsed/></Channel></Data></Parameter><Parameter><value>1</value></Parameter><Parameter><value>1</value></Parameter><Parameter><value>1</value></Parameter><Parameter><X><Channel Name="X"><Uncollapsed/></Channel></X><Y><Channel Name="Y"><Uncollapsed/></Channel></Y><Icon>False</Icon><Action3D>False</Action3D></Parameter><Parameter><value>1</value></Parameter><Parameter><value>1</value></Parameter><Parameter><value>0</value></Parameter></ShaderParameters><InputPage>0</InputPage><RenderContext>0</RenderContext><InputRewiring><InputIndex SamplerIndex="0">0</InputIndex></InputRewiring><ShaderPresetIndex>0</ShaderPresetIndex><WorkingCS>From Source</WorkingCS></State></Setup>